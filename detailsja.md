---
layout: contents
language: ja
title: Details
short_desc: File Transaction by FUSE based file system
lang_opp_file: details.html
lang_opp_word: To English
prev_url: featureja.html
prev_string: Feature
top_url: indexja.html
top_string: TOP
next_url: usageja.html
next_string: Usage
---

# 説明
K2HFTFUSEとK2HFTFUSESVRについて説明します。

## K2HFTFUSE
K2HFTFUSEプログラムは、FUSE（Filesystem in Userspace）を利用した独自の仮想ファイルシステムを作成するプログラムです。
K2HFTFUSEプログラムを起動する方法は、以下の2通りの方法があります。

### 1. mountコマンド
K2HFTFUSEの提供する仮想ファイルシステムをシステムにマウントするためにmountコマンドを利用します。  
mountコマンドを利用するため、/etc/fstabファイルにK2HFTFUSEプログラムのエントリーが必要です。

### 2. 手動起動
K2HFTFUSEの提供する仮想ファイルシステムを手動で起動します。  
必要となるコマンドパラメータを適宜指定して、K2HFTFUSEプログラムを起動します。  
K2HFTFUSEプログラムの起動には、バックグラウンド（デーモン）とフォアグラウンドでの2種類の起動ができます。

### 起動オプション
K2HFTFUSEプログラムの起動オプションは、mountコマンドと同じ起動オプション（-o <option>=<option value>）を周到しています。

#### -h(--help)
ヘルプを表示します
#### -v(--version)
バージョン情報を表示します
#### -d(--debug)
libfuseで定義されているオプションであり、FUSEのデバッグメッセージの出力をします。このオプションを指定し、dbglevelオプションを指定しない場合には、dbglevel=msgと同じレベルのK2HFTFUSEのデバッグメッセージの出力をします。
#### -f
K2HFTFUSEをフォアグラウンドで起動します。このオプションが指定されない場合には、バックグラウンドで起動します（デーモンとして動作します）。
#### -o umask=<number>
マウントポイント以下のumaskを指定します。man mountなどを参考にしてください。
#### -o uid=<number>
マウントポイント以下のuidを指定します。man mountなどを参考にしてください。
#### -o gid=<number>
マウントポイント以下のgidを指定します。man mountなどを参考にしてください。
#### -o dbglevel={err|wan|msg}
K2HFTFUSEのデバッグメッセージの出力レベルを指定します。出力レベルは、silent、err(error)、wan(warning)、msg(message)を指定できます。K2HFTFUSEがバックグラウンドで起動されている場合には、syslogとして出力されます。
#### -o conf=<configration file>
K2HFTFUSEの詳細なオプションを指定したコンフィグレーションファイル（INI形式、YAML形式、JSON形式）を指定します。このオプションは、jsonオプションと排他です。
#### -o json=<json string>
K2HFTFUSEの詳細なオプションをJSON形式の文字列として指定します。このオプションは、confオプションと排他です。
#### -o enable_run_chmpx
このオプションを指定した場合には、[CHMPX](https://chmpx.antpick.ax/indexja.html) プログラムを起動してから、K2HFTFUSEプログラムの初期化を行います。  
K2HFTUSEプログラムを起動する前に、CHMPXを起動している必要があります。  
CHMPXは、通信ミドルウエアプログラムであり、K2HFTFUSEで利用することが前提となっています。  
このオプションを指定した場合には、CHMPXプログラムをK2HFTFUSEプログラムが起動しますので、あらかじめCHMPXプログラムを起動しておく必要はありません。
#### -o disable_run_chmpx
このオプションを指定した場合には、CHMPXプログラムの起動は行われません。enable_run_chmpxおよびdisable_run_chmpxが指定されていない場合は、disable_run_chmpxをデフォルトとして動作します。  
K2HFTFUSEプログラムの起動の前に、CHMPXを起動しておく必要があります。  
CHMPXプログラムの起動は、以下のようにします。  
```
$ chmpx -conf slave.ini &
```  
CHMPXの詳細な起動オプションについては、[CHMPX](https://chmpx.antpick.ax/indexja.html) を参照してください。
#### -o chmpxlog=<log file path>
enable_run_chmpxオプションが指定され、K2HFTFUSEによりCHMPXが起動された場合に、CHMPXプログラムのデバッグメッセージをファイルに出力する場合に指定します。  
enable_run_chmpxオプションが指定され、本オプションが指定されていない場合には、CHMPXプログラムのデバッグメッセージは/dev/nullに出力されます。

#### _注意_
_コンフィグレーション（INI形式ファイル、YAML形式ファイル、JSON形式ファイル、JSON文字列）については、[こちら](usageja.html) を参照してください。_

### 起動方法
K2HFTFUSEを手動で起動する場合には、以下のようにします。
```
k2hftfuse [mount point] [k2hftfuse or fuse options]
```
以下は起動例です。
```
$ k2hftfuse /mnt/k2hfs -o allow_other -o nodev -o nosuid -o _netdev -o dbglevel=err -o conf=/etc/k2hftfuse.conf -f -d
```
もしくは、"-o"を使うオプションを","区切りでまとめて指定できます。
```
$ k2hftfuse /mnt/k2hfs -o allow_other,nodev,nosuid,_netdev,dbglevel=err,conf=/etc/k2hftfuse.conf -f -d
```

K2HFTFUSEをmountコマンドから起動する場合には、以下のように/etc/fstabへオプションなどを記述します。
_fstabの詳細については、man mount/man fstabなどを参照してください。_
```
k2hftfuse /mnt/k2hfs fuse allow_other,nodev,nosuid,_netdev,dbglevel=err,conf=/etc/k2hftfuse.conf 0 0
```

上記の/etc/fstabを準備した後で、以下のようにmountコマンドを使い、マウントします。
```
$ mount /mnt/k2hfs
```

バックグラウンドで起動したK2HFTFUSEを終了する場合には、以下のようにumountコマンドもしくはfusermountを使ってください。
```
$ umount /mnt/k2hfs
  or
$ fusermount -d /mnt/k2hfs
```

### 環境変数
K2HFTFUSEプログラムは、コンフィグレーションの指定を環境変数から行うこともできます。
これにより、JSON文字列を指定する（-o jsonオプション）ときなどコマンドラインを少なくもできます。
#### K2HFTCONFFILE
-o confオプションと同じで、コンフィグレーションファイルを指定します。
#### K2HFTJSONCONF
-o jsonオプションと同じで、JSON文字列でコンフィグレーションを指定します。

オプションと環境変数には、優先順位があります。
環境変数は、コマンドラインオプションに -o conf/-o jsonが存在しない場合に使用されます。また、K2HFTCONFFILEとK2HFTJSONCONFが同時に設定されている場合には、K2HFTCONFFILEが優先されます。

## K2HFTFUSESVR
K2HFTFUSESVRプログラムは、K2HFTFUSEから送られてくるファイルコンテンツもしくはメッセージを受け取るための標準プログラムです。
K2HFTUFSEから送信されたデータを受信するプログラムは、K2HFTFUSESVRを参考に自作できます。
K2HFTFUSESVRは、汎用的なK2HFTUFSEのレシーバープログラムとして準備されています。

### 起動方法
K2HFTFUSESVRプログラムを起動するには、以下のように行います。
```
k2hftfusesvr [options]
```

以下は起動例です。
```
$ k2hftfusesvr -conf /etc/k2hftfusesvr.conf
```

### 起動オプション
K2HFTFUSESVRプログラムの起動オプションについて以下にまとめます。
#### -h(help)
ヘルプを表示します
#### -v(version)
バージョン情報を表示します
#### -conf <configration file>
K2HFTFUSESVRの詳細なオプションを指定したコンフィグレーションファイル（INI形式、YAML形式、JSON形式）を指定します。このオプションは、jsonオプションと排他です。
#### -json <json string>
K2HFTFUSESVRの詳細なオプションをJSON形式の文字列として指定します。このオプションは、confオプションと排他です。
#### -d(g) {err|wan|msg|silent}
K2HFTFUSESVRのデバッグメッセージの出力レベルを指定します。出力レベルは、silent、err(error)、wan(warning)、msg(message)を指定できます。

### 環境変数
K2HFTFUSESVRプログラムは、K2HFTFUSEと同様にコンフィグレーションの指定を環境変数から行うこともできます。
#### K2HFTSVRCONFFILE
confオプションと同じで、コンフィグレーションファイルを指定します。
#### K2HFTSVRJSONCONF
jsonオプションと同じで、JSON文字列でコンフィグレーションを指定します。

オプションと環境変数には、優先順位があります。
環境変数は、コマンドラインオプションに conf/jsonが存在しない場合に使用されます。また、K2HFTSVRCONFFILEとK2HFTSVRJSONCONFが同時に設定されている場合には、K2HFTSVRCONFFILEが優先されます。

## コンフィグレーション

### K2HFTFUSEコンフィグレーション
K2HFTFUSEプログラムに引き渡すコンフィグレーション（ファイルもしくはJSON文字列）の項目を説明します。

#### K2HFTFUSE（INIファイル形式時は"[K2HFTFUSE]"）セクション
##### K2HTYPE
K2HFTFUSEが内部で利用する [K2HASH](https://k2hash.antpick.ax/indexja.html) ライブラリ（KVSライブラリ）が作成するKVSデータの格納領域のタイプを指定します。  
値は、mem（オンメモリタイプ）/file（ファイルタイプ）/TEMP（テンポラリファイルタイプ）を指定します。  
デフォルトは、mem（メモリ）タイプとなっています。
##### K2HFILE
K2HTYPEをFILEもしくはTEMPとして指定した場合に、そのファイルパスを指定します。
##### K2HFULLMAP
K2HFTFUSEが内部で利用するK2HASHライブラリ（KVSライブラリ）が使うKVSデータのマッピングタイプを指定します。  
メモリマッピングを、全ての領域（=yes）かインデックスのみの部分的（=no）であるかを指定します。  
省略された場合には、全ての領域（=yes）となります。またK2HTYPEがMEMの場合には、本項目の値に関係なく全ての領域（=yes）となります。
##### K2HINIT
K2HFTFUSEが内部で利用するK2HASHライブラリ（KVSライブラリ）が使うKVSデータを起動時に初期化するか指定します。  
KVSデータを初期化する場合は、yesを指定します。初期化しない場合には、noを指定してください。  
省略された場合には、初期化する（=yes）となります。またK2HTYPEがMEMもしくはTEMPの場合には、本項目の値に関係なくyesとなります。
##### K2HMASKBIT
K2HFTFUSEが内部で利用するK2HASHライブラリ（KVSライブラリ）が使うKVSデータの初期サイズのためのパラメータを指定します。  
本項目については、[K2HASH](https://k2hash.antpick.ax/indexja.html) を参照してください。K2HTYPEがFILEであり、すでに指定したファイルが存在する場合には初期化が行われないため、本項目の値は無視されます。  
省略された場合には、8（ビット）が使用されます。
##### K2HCMASKBIT
K2HFTFUSEが内部で利用するK2HASHライブラリ（KVSライブラリ）が使うKVSデータの初期サイズのためのパラメータを指定します。  
本項目については、[K2HASH](https://k2hash.antpick.ax/indexja.html) を参照してください。K2HTYPEがFILEであり、すでに指定したファイルが存在する場合には初期化が行われないため、本項目の値は無視されます。  
省略された場合には、4（ビット）が使用されます。
##### K2HMAXELE
K2HFTFUSEが内部で利用するK2HASHライブラリ（KVSライブラリ）が使うKVSデータの初期サイズのためのパラメータを指定します。  
本項目については、[K2HASH](https://k2hash.antpick.ax/indexja.html) を参照してください。K2HTYPEがFILEであり、すでに指定したファイルが存在する場合には初期化が行われないため、本項目の値は無視されます。  
省略された場合には、32（個）が使用されます。
##### K2HPAGESIZE
K2HFTFUSEが内部で利用するK2HASHライブラリ（KVSライブラリ）が使うKVSデータの初期サイズのためのパラメータを指定します。  
本項目については、[K2HASH](https://k2hash.antpick.ax/indexja.html) を参照してください。K2HTYPEがFILEであり、すでに指定したファイルが存在する場合には初期化が行われないため、本項目の値は無視されます。  
省略された場合には、128（byte）が使用されます。
##### DTORTHREADCNT
K2HFTFUSEがデータを転送するための出力処理に割り当てるスレッド数を指定します。  
省略された場合には、1となります。
##### DTORCTP
K2HFTFUSEがデータを転送するための出力処理を行うプログラムを指定します。  
このプログラムは、K2HASHトランザクションプログラムのシェアードライブラリの必要があります。独自の処理としてカスタマイズしたK2HASHトランザクションプログラムの作り方などは、[K2HTPDTOR](https://k2htp_dtor.antpick.ax/indexja.html) を参照してください。  
省略された場合には、K2HTPDTOR（k2htpdtor.so）が利用されます。
##### BINTRANS
K2HFTFUSEが転送するデータのタイプを指定します。  
データが改行コードでデータ区切りを用いるようなテキストファイルを対象とする場合は、noを指定してください。データの区切りのないバイナリデータの場合には、yesを指定します。  
本項目がyesの場合には、K2HFTFUSEの仮想ファイルシステムへのデータ書き込み後に、ファイルをflushしたタイミングを区切りとしてデータ転送が行われます。  
データを書き込むプログラムはデータの区切りにてそのファイルディスクリプタに対してflushを行わなければならなくなります。BYTELIMITの項目も参照してください。  
省略された場合には、noとなります。
##### EXPIRE
通信障害など発生した場合や、転送処理能力の不足により、出力するデータよりも入力データの方が多い場合には、K2HFTFUSEによりデータは一時的にキューイングされています。  
このキューイングされたデータは、FIFOとして順次転送されます。  
長期間に渡る通信不通や、消費期限の過ぎたデータの転送は、無駄となるシステムがあります。このようなシステムの場合、入力されたデータが出力されるまでの時間を指定して転送を行わず、破棄できます。  
本項目で、データを転送せず、破棄するまでの時間（秒）を指定できます。  
指定できる値は、0以上の正数であり、0は特別な意味を持っています。0を指定した場合には破棄をしなくなります。デフォルトは0です。
##### TRANSLINECNT
転送するデータを1単位で転送するか、それとも複数単位を蓄積してから転送するかを指定します。TRANSTIMEUP項目と一緒に指定します。  
1単位とはテキストファイルであれば、1行分のデータであり、バイナリデータであれば、flushされるまでのデータです。（BINTRANS参照）  
この項目で指定された単位数まで蓄積を行い、一度の転送で複数単位のデータを送信します。  
省略された場合には、0であり、蓄積を行わず、データは転送されます。
##### TRANSTIMEUP
TRANSLINECNTを指定している場合、転送するデータの単位数が蓄積される前に、この項目で指定された時間（秒）が経過すると蓄積されたデータを転送します。  
された場合には、0であり、TRANSLINECNTを1以上に指定していても、蓄積を行わず、データは転送されます。
##### BYTELIMIT
転送するデータの上限バイト数を指定します。  
この値を超えた1単位のデータは破棄されます。  
省略された場合には、0であり、上限バイト数がない状態です。


#### K2HFTFUSE_RULE_DIR（INIファイル形式時は"[K2HFTFUSE_RULE_DIR]"）セクション
INI形式では、\[K2HFTFUSE_RULE_DIR\]セクションとして、1つのコンフィグレーションファイルに複数記述できます。  
INI形式以外では、K2HFTFUSEセクションの子として指定して、複数設定する場合には配列として指定してください。  
本セクションは、K2HFTFUSEがマウントした仮想ファイルシステムパス以下の指定したディレクトリ（マウントポイントからの相対パス）内のファイルに対する書き込みがあった場合のルールを指定します。

##### TARGET
対象とするディレクトリ（マウントポイントからの相対パス）を指定します。  
省略された場合には、空となりマウントポイント自体を指し示します。
##### TRUNS
指定されたディレクトリ以下のファイルへの書き込みを全て転送する場合に、yesを指定します。転送しない場合にはnoを指定します。  
された場合には、noとなります。
##### OUTPUTFILE
指定されたディレクトリ以下のファイルへの書き込みを、本項目で指定したディレクトリ（絶対パスで指定）以下のファイルへ複写します。  
省略された場合には、複写されません。
##### PLUGIN
指定されたディレクトリ以下のファイルへの書き込みがあった場合、本項目で指定したプラグインとして動作するプログラムに標準入力として引き渡します。  
本項目で指定されたプログラムは、K2HFTFUSEの子プロセスとして起動され、その標準入力に書き込まれたデータが引き渡されます。  
省略された場合には、何もしません。
##### DEFAULTALL
以下に示すALLOW項目/DENY項目で書き込まれたデータをパターンマッチングする場合に、デフォルトを許可（ALLOW）にするか、不許可（DENY）にするかを指定します。  
省略された場合には、DENYとなります。
##### ALLOW
書き込まれたデータのパターンマッチングを行う正規表現を記述します。マッチングした場合には、転送や複写が許可されます。  
DEFAULTALLがALLOWとなっている場合には、本項目は無視されます。  
設定する値は、1つもしくは、2つの値を設定できます。  
2つの場合を含めて、第一番目の値にはマッチングをする正規表現を指定します。二番目の値には、正規表現でマッチングしたときに加工したデータフォーマットを指定します。
- INI形式ファイルの場合  
この項目の値は、""で囲ってください。2つの値を指定するには、INI形式の場合には、第一番目と二番目を","で区切って指定してください。
- INI形式以外の場合  
この項目の値は配列表現で指定してください。1つだけの場合には1つの値だけの配列としてください。

##### DENY
書き込まれたデータのパターンマッチングを行う正規表現を記述します。マッチングした場合には、転送や複写が許可されません。  
DEFAULTALLがDENYとなっている場合には、本項目は無視されます。  
値は正規表現を指定します。
- INI形式ファイルの場合  
この項目の値は、""で囲ってください。
- INI形式以外の場合  
この項目の値は配列表現で指定し、配列の内容は1つだけです。（ALLOWと同じ形式です）

#### K2HFTFUSE_RULE（INIファイル形式時は"[K2HFTFUSE_RULE]"）セクション
INI形式では、\[K2HFTFUSE_RULE\]セクションとして、1つのコンフィグレーションファイルに複数記述できます。  
INI形式以外では、K2HFTFUSEセクションの子として指定して、複数設定する場合には配列として指定してください。  
本セクションは、K2HFTFUSEがマウントした仮想ファイルシステムパス以下の指定したファイル（マウントポイントからの相対パス）に対する書き込みがあった場合のルールを指定します。  
K2HFTFUSE_RULE_DIRで指定されたディレクトリパス以下のファイルパスを指定した場合には、K2HFTFUSE_RULEで指定された設定が優先されます。

##### TARGET
対象とするファイル（マウントポイントからの相対パス）を指定します。
##### TRUNS
指定されたファイルへの書き込みを全て転送する場合に、yesを指定します。転送しない場合にはnoを指定します。  
省略された場合には、noとなります。
##### OUTPUTFILE
指定されたファイルへの書き込みを、本項目で指定したファイル（絶対パスで指定）へ複写します。  
省略された場合には、複写されません。
##### PLUGIN
指定されたファイルへの書き込みがあった場合、本項目で指定したプラグインとして動作するプログラムに標準入力として引き渡します。  
本項目で指定されたプログラムは、K2HFTFUSEの子プロセスとして起動され、その標準入力に書き込まれたデータが引き渡されます。  
省略された場合には、何もしません。
##### DEFAULTALL
K2HFTFUSE_RULE_DIRセクションのDEFAULTALLと同じです。
##### ALLOW
K2HFTFUSE_RULE_DIRセクションのALLOWと同じです。
##### DENY
K2HFTFUSE_RULE_DIRセクションのDENYと同じです。

#### CHMPXが利用するセクション
K2HFTFUSEのコンフィグレーションには、CHMPXのコンフィグレーションが含まれます。  
K2HFTFUSEとCHMPXのコンフィグレーションを分離できますが、管理が煩雑となるため、ほとんどのケースで同一のコンフィグレーションに双方を記述することが多いと思います。  
CHMPXが利用するセクションは、GLOBAL、SVRNODE、SLVNODEの3つです。（INI形式の場合には、\[GLOBAL\]、\[SVRNODE\]、\[SLVNODE\]です。）  
これらの設定内容については、[CHMPX](https://chmpx.antpick.ax/indexja.html) の説明を参照してください。

#### K2HTPDTORが利用するセクション
K2HFTFUSE（INIファイル形式時は"[K2HFTFUSE]"）セクションで、DTORCTP項目を指定しない場合、転送のための処理として K2HTPDTOR（K2HASH標準トランザクションプログラム）が起動されます。  
このK2HTPDTORプログラムが利用するセクションが、K2HTPDTOR（INI形式の場合は、\[K2HTPDTOR\]です）セクションです。  
この設定内容については、[CHMPX](https://chmpx.antpick.ax/indexja.html) の説明を参照してください。

### K2HFTFUSESVRコンフィグレーション
K2HFTFUSESVRプログラムに引き渡すコンフィグレーション（ファイルもしくはJSON文字列）の項目を説明します。

#### K2HFTFUSESVR（INIファイル形式時は"[K2HFTFUSESVR]"）セクション

##### TYPE
K2HFTFUSESVRプログラムのタイプを指定します。指定できるタイプは、転送（trans）、ファイル出力（file）、転送かつファイル出力（both）のいずれかです。  
転送（trans）は中継サーバーとして動作させるときに使用します。  
ファイル出力（file）は転送の終端サーバーとなる場合に使用します。  
bothを指定した場合には、ファイル出力をしながら、転送も行う中継サーバーとして動作します。  
省略した場合には、fileとなります。
##### FILE_BASEDIR
ファイル出力する場合の出力ファイルのベースディレクトリを指定します。  
転送されたデータが書き込まれたファイルの、K2HFTFUSEによるマウントポイントからの相対パスに応じたパスがこの指定されたディレクトリの下に作成され、書き込まれます。  
ただし、FILE_UNIFY項目が指定された場合には、例外として1ファイルのみへの出力します。  
TYPE項目が、fileもしくはbothの場合には指定必須です。
##### FILE_UNIFY
ファイル出力する場合に、全ての出力されるデータを1つのファイルにまとめて出力する場合に指定します。  
本項目で指定するファイルパスは、FILE_BASEDIRで指定したディレクトリからの相対パスです。
##### FILE_TIMEFORM
K2HFTFUSEから転送されるデータには、書き込まれたデータに付属情報として書き込まれた時点のタイムスタンプが含まれています。  
ファイル出力をする場合には、このタイムスタンプを一緒に出力できます。  
この場合のタイムスタンプの出力フォーマットを、strftime関数と同様のフォーマットで指定できます。  
タイムスタンプには、strftimeで表現できないnsの情報があります。このnsの情報を出力する場合には、strftimeのフォーマットに加えて、"%-"という表記でnsを出力できます。  
省略した場合には、""となり、FORMAT項目で"%T"を指定しても何も出力されません。
##### PLUGIN
受け取ったデータを独自に処理する場合に、外部プログラムのパスを指定します。  
指定した外部プログラムはK2HFTFUSESVRの子プロセスとして起動され、その標準入力にK2HFTFUSESVRが受け取ったデータが引き渡されます。  
省略した場合には、外部プログラムは呼び出されません。
##### FORMAT
TYPEでfileもしくはbothを指定した場合に、ファイルに受け取ったデータが書き込まれます。  
K2HFTFUSEはデータを転送するときに、不足情報として書き込みを行ったホスト名、プロセス（スレッド）ID、書き込みファイルパス、書き込み時刻を付与しています。  
K2HFTFUSESVRがファイルにデータを書き出す場合に、これらの付属情報とともに独自のフォーマットで整形して出力できます。  
フォーマットは、以下のキーワードで指定できます。
| フォーマット | 説明             |
|:-------|:-----------------------|
| %H	 | ホスト名               |
| %P	 | プロセス（スレッド）ID |
| %F	 | 書き込みファイルパス   |
| %f	 | 書き込みファイル名     |
| %T	 | 書き込み時刻（時刻のフォーマットはFILE_TIMEFORM項目で指定します） |
| %L	 | 受け取ったデータ       |
_省略した場合には、"%L"となり、受け取ったデータのみを出力します。_

##### TRANSCONF
TYPE項目にtransもしくはbothを指定した場合に、転送をするために起動しているCHMPXプログラムのコンフィグレーションを指定します。  
TYPE項目にtransもしくはbothを指定した場合には指定必須です。（CHMPXのコンフィグレーションを環境変数で指定する場合には省略が可能です。詳細は [CHMPX](https://chmpx.antpick.ax/indexja.html) を参照してください）
##### K2HTYPE
TYPE項目にtransもしくはbothを指定した場合に必要となる項目です。  
K2HFTFUSESVRが内部で利用するK2HASHライブラリ（KVSライブラリ）が作成するKVSデータの格納領域のタイプを指定します。  
値は、mem（オンメモリタイプ）/file（ファイルタイプ）/TEMP（テンポラリファイルタイプ）を指定します。
##### K2HFILE
TYPE項目にtransもしくはbothを指定した場合に必要となる項目です。  
K2HTYPEをFILEもしくはTEMPとして指定した場合に、そのファイルパスを指定します。
##### K2HFULLMAP
TYPE項目にtransもしくはbothを指定した場合に必要となる項目です。  
K2HASHライブラリ（KVSライブラリ）が使うKVSデータのマッピングタイプを指定します。  
メモリマッピングを、全ての領域（=yes）かインデックスのみの部分的（=no）であるかを指定します。  
省略された場合には、全ての領域（=yes）となります。またK2HTYPEがMEMの場合には、本項目の値に関係なく全ての領域（=yes）となります。
##### K2HINIT
TYPE項目にtransもしくはbothを指定した場合に必要となる項目です。  
K2HASHライブラリ（KVSライブラリ）が使うKVSデータを起動時に初期化するか指定します。  
KVSデータを初期化する場合は、yesを指定します。初期化しない場合には、noを指定してください。  
省略された場合には、初期化する（=yes）となります。またK2HTYPEがMEMもしくはTEMPの場合には、本項目の値に関係なくyesとなります。
##### K2HMASKBIT
TYPE項目にtransもしくはbothを指定した場合に必要となる項目です。  
K2HASHライブラリ（KVSライブラリ）が使うKVSデータの初期サイズのためのパラメータを指定します。  
本項目については、[K2HASH](https://k2hash.antpick.ax/indexja.html) を参照してください。K2HTYPEがFILEであり、すでに指定したファイルが存在する場合には初期化が行われないため、本項目の値は無視されます。  
省略された場合には、8（ビット）が使用されます。
##### K2HCMASKBIT
項目にtransもしくはbothを指定した場合に必要となる項目です。  
K2HASHライブラリ（KVSライブラリ）が使うKVSデータの初期サイズのためのパラメータを指定します。  
本項目については、[K2HASH](https://k2hash.antpick.ax/indexja.html) を参照してください。K2HTYPEがFILEであり、すでに指定したファイルが存在する場合には初期化が行われないため、本項目の値は無視されます。  
省略された場合には、4（ビット）が使用されます。
##### K2HMAXELE
TYPE項目にtransもしくはbothを指定した場合に必要となる項目です。  
K2HASHライブラリ（KVSライブラリ）が使うKVSデータの初期サイズのためのパラメータを指定します。  
本項目については、[K2HASH](https://k2hash.antpick.ax/indexja.html) を参照してください。K2HTYPEがFILEであり、すでに指定したファイルが存在する場合には初期化が行われないため、本項目の値は無視されます。  
省略された場合には、32（個）が使用されます。
##### K2HPAGESIZE
TYPE項目にtransもしくはbothを指定した場合に必要となる項目です。  
K2HASHライブラリ（KVSライブラリ）が使うKVSデータの初期サイズのためのパラメータを指定します。  
本項目については、[K2HASH](https://k2hash.antpick.ax/indexja.html) を参照してください。K2HTYPEがFILEであり、すでに指定したファイルが存在する場合には初期化が行われないため、本項目の値は無視されます。  
省略された場合には、128（byte）が使用されます。
##### DTORTHREADCNT
TYPE項目にtransもしくはbothを指定した場合に必要となる項目です。  
K2HFTFUSESVRがデータを転送するための出力処理に割り当てるスレッド数を指定します。  
省略された場合には、1となります。
##### DTORCTP
TYPE項目にtransもしくはbothを指定した場合に必要となる項目です。  
K2HFTFUSEがデータを転送するための出力処理を行うプログラムを指定します。  
このプログラムは、K2HASHトランザクションプログラムのシェアードライブラリの必要があります。独自の処理としてカスタマイズしたK2HASHトランザクションプログラムの作り方などは、[K2HTPDTOR](https://k2htp_dtor.antpick.ax/indexja.html) を参照してください。  
省略された場合には、K2HTPDTOR（k2htpdtor.so）が利用されます。
